package Comida;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;
import Carrito.BaseDeDatos;
import Menu.MenuPrincipal;

public class Mexicana extends JFrame {

	private static final long serialVersionUID = 1L;
	private JPanel contentPane;
	private BaseDeDatos carrito = BaseDeDatos.getInstancia();

	public Mexicana() {
		setTitle("Comida Mexicana - LaCasaDelSnack");
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setBounds(100, 100, 700, 500);
		setLocationRelativeTo(null);

		contentPane = new JPanel();
		contentPane.setBackground(Color.WHITE);
		contentPane.setBorder(new EmptyBorder(15, 15, 15, 15));
		contentPane.setLayout(new BorderLayout(10, 10));
		setContentPane(contentPane);

		// ==== PANEL DE COMIDAS ====
		JPanel panelComidas = new JPanel();
		panelComidas.setBackground(Color.WHITE);
		panelComidas.setLayout(new GridLayout(5, 1, 15, 15));
		contentPane.add(panelComidas, BorderLayout.CENTER);

		// ==== PLATILLOS ====
		agregarPlatillo(panelComidas, "Tacos al pastor (5 pzas)", "ðŸŒ®", 55);
		agregarPlatillo(panelComidas, "Quesadilla de queso", "ðŸ§€", 25);
		agregarPlatillo(panelComidas, "Burrito de carne", "ðŸŒ¯", 60);
		agregarPlatillo(panelComidas, "Nachos con queso", "ðŸ¥¨", 45);
		agregarPlatillo(panelComidas, "Torta de milanesa", "ðŸ¥ª", 50);

		// ==== BOTÃ“N REGRESAR ====
		JPanel panelInferior = new JPanel();
		panelInferior.setBackground(Color.WHITE);
		JButton btnRegresar = new JButton("â¬… Regresar al MenÃº");
		btnRegresar.setBackground(new Color(255, 140, 0));
		btnRegresar.setForeground(Color.WHITE);
		btnRegresar.setFont(new Font("Segoe UI", Font.BOLD, 14));
		btnRegresar.setFocusPainted(false);
		btnRegresar.setBorder(BorderFactory.createEmptyBorder(10, 20, 10, 20));
		btnRegresar.addMouseListener(new MouseAdapter() {
			public void mouseEntered(MouseEvent e) {
				btnRegresar.setBackground(new Color(255, 165, 0));
			}
			public void mouseExited(MouseEvent e) {
				btnRegresar.setBackground(new Color(255, 140, 0));
			}
		});
		
		btnRegresar.addActionListener(e -> {
			dispose();
			new MenuPrincipal().setVisible(true); 
		});
		
		panelInferior.add(btnRegresar);
		contentPane.add(panelInferior, BorderLayout.SOUTH);
	}

	// ==== MÃ‰TODO PARA CREAR PLATILLOS ====
	private void agregarPlatillo(JPanel panel, String nombre, String icono, double precio) {
		JPanel panelItem = new JPanel(new BorderLayout(10, 10));
		panelItem.setBackground(Color.WHITE);
		panelItem.setBorder(BorderFactory.createLineBorder(Color.LIGHT_GRAY));

		// Imagen / Ãcono
		JLabel lblImagen = new JLabel(icono, SwingConstants.CENTER);
		lblImagen.setFont(new Font("Segoe UI Emoji", Font.PLAIN, 28));
		panelItem.add(lblImagen, BorderLayout.WEST);

		// Nombre, precio y contador
		JPanel panelTexto = new JPanel(new GridLayout(3, 1));
		panelTexto.setBackground(Color.WHITE);

		JLabel lblNombre = new JLabel(nombre, SwingConstants.LEFT);
		lblNombre.setFont(new Font("Segoe UI", Font.BOLD, 16));
		JLabel lblPrecio = new JLabel("Precio: $" + precio, SwingConstants.LEFT);
		lblPrecio.setFont(new Font("Segoe UI", Font.PLAIN, 14));
		panelTexto.add(lblNombre);
		panelTexto.add(lblPrecio);

		// ==== CONTADOR DE CANTIDAD ====
		JPanel panelCantidad = new JPanel(new FlowLayout(FlowLayout.LEFT, 5, 0));
		panelCantidad.setBackground(Color.WHITE);

		JButton btnMenos = new JButton("âž–");
		JLabel lblCantidad = new JLabel("1");
		JButton btnMas = new JButton("âž•");

		btnMenos.setBackground(new Color(230, 230, 230));
		btnMas.setBackground(new Color(230, 230, 230));
		btnMenos.setFocusPainted(false);
		btnMas.setFocusPainted(false);

		btnMas.addActionListener(e -> {
			int cantidad = Integer.parseInt(lblCantidad.getText());
			lblCantidad.setText(String.valueOf(cantidad + 1));
		});

		btnMenos.addActionListener(e -> {
			int cantidad = Integer.parseInt(lblCantidad.getText());
			if (cantidad > 1) lblCantidad.setText(String.valueOf(cantidad - 1));
		});

		panelCantidad.add(btnMenos);
		panelCantidad.add(lblCantidad);
		panelCantidad.add(btnMas);

		panelTexto.add(panelCantidad);
		panelItem.add(panelTexto, BorderLayout.CENTER);

		// ==== BOTÃ“N AGREGAR ====
		JButton btnAgregar = new JButton("Agregar al carrito ðŸ›’");
		btnAgregar.setBackground(new Color(255, 140, 0));
		btnAgregar.setForeground(Color.WHITE);
		btnAgregar.setFont(new Font("Segoe UI", Font.BOLD, 13));
		btnAgregar.setFocusPainted(false);
		btnAgregar.setBorder(BorderFactory.createEmptyBorder(8, 12, 8, 12));

		btnAgregar.addMouseListener(new MouseAdapter() {
			public void mouseEntered(MouseEvent e) {
				btnAgregar.setBackground(new Color(255, 165, 0));
			}
			public void mouseExited(MouseEvent e) {
				btnAgregar.setBackground(new Color(255, 140, 0));
			}
		});

		btnAgregar.addActionListener(e -> {
			int cantidad = Integer.parseInt(lblCantidad.getText());
			for (int i = 0; i < cantidad; i++) {
				carrito.agregarProducto(nombre + " - $" + precio);
			}
			JOptionPane.showMessageDialog(this,
					cantidad + " " + nombre + "(s) agregado(s) al carrito âœ…");
		});

		panelItem.add(btnAgregar, BorderLayout.EAST);
		panel.add(panelItem);
	}

	// === MAIN TEMPORAL PARA PRUEBA ===
	public static void main(String[] args) {
		EventQueue.invokeLater(() -> {
			try {
				Mexicana frame = new Mexicana();
				frame.setVisible(true);
			} catch (Exception e) {
				e.printStackTrace();
			}
		});
	}
}
